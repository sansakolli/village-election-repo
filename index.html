<!DOCTYPE html>
<html lang="te">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Election App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Telugu:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans Telugu', sans-serif;
            background-color: #f0f2f5;
        }
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex; align-items: center; justify-content: center;
            z-index: 50;
        }
        .modal-content { max-height: 90vh; overflow-y: auto; }
        .modal-content::-webkit-scrollbar { width: 8px; }
        .modal-content::-webkit-scrollbar-track { background: #f1f1f1; }
        .modal-content::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        .modal-content::-webkit-scrollbar-thumb:hover { background: #555; }
        
        .status-supporter-border { border-color: #16a34a; }
        .status-neutral-border { border-color: #64748b; }
        .status-opposition-border { border-color: #dc2626; }

        .status-supporter-bg { background-color: #16a34a; color: white; }
        .status-neutral-bg { background-color: #64748b; color: white; }
        .status-opposition-bg { background-color: #dc2626; color: white; }

        .gemini-btn {
            background: linear-gradient(135deg, #4285F4, #9B59B6, #CF2D7A);
            color: white;
            transition: all 0.3s ease;
        }
        .gemini-btn:hover {
            box-shadow: 0 0 15px rgba(155, 89, 182, 0.5);
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #9B59B6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Chat bubble styles */
        .chat-bubble { max-width: 80%; }
        .user-bubble { background-color: #DCF8C6; }
        .ai-bubble { background-color: #FFFFFF; }
        .chat-container { height: 60vh; }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-blue-600 text-white shadow-md fixed top-0 left-0 right-0 z-40 transform transition-transform duration-300">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <h1 class="text-xl font-bold">‡∞é‡∞®‡±ç‡∞®‡∞ø‡∞ï‡∞≤ ‡∞°‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç</h1>
            <div class="flex items-center gap-2">
                <button id="ai-agent-btn" class="bg-white/20 text-white text-sm font-bold py-2 px-4 rounded-full hover:bg-white/30 transition">ü§ñ AI ‡∞è‡∞ú‡±Ü‡∞Ç‡∞ü‡±ç</button>
                <button id="ai-strategist-btn" class="gemini-btn text-sm font-bold py-2 px-4 rounded-full">‚ú® AI ‡∞µ‡±ç‡∞Ø‡±Ç‡∞π‡∞ï‡∞∞‡±ç‡∞§</button>
            </div>
        </div>
    </header>
    <div id="header-spacer" class="h-[68px]"></div>
    
    <!-- Statistics Panel -->
    <div id="stats-panel" class="container mx-auto px-4 pt-4 bg-[#f0f2f5] pb-3">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-center">
            <div class="bg-blue-100 p-3 rounded-lg shadow">
                <p class="text-sm font-bold text-blue-800">‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞ì‡∞ü‡∞∞‡±ç‡∞≤‡±Å</p>
                <p id="stats-total" class="text-2xl font-bold text-blue-900">0</p>
            </div>
            <div class="bg-green-100 p-3 rounded-lg shadow">
                <p class="text-sm font-bold text-green-800">‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å‡∞¶‡∞æ‡∞∞‡±Å‡∞≤‡±Å</p>
                <p id="stats-supporters" class="text-2xl font-bold text-green-900">0</p>
                <button class="gemini-btn text-xs font-bold py-1 px-3 rounded-full mt-2 generate-message-btn" data-group="Supporter">‚ú® ‡∞™‡±ç‡∞∞‡∞ö‡∞æ‡∞∞ ‡∞∏‡∞Ç‡∞¶‡±á‡∞∂‡∞Ç</button>
            </div>
            <div class="bg-red-100 p-3 rounded-lg shadow">
                <p class="text-sm font-bold text-red-800">‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡∞∞‡±ç‡∞•‡∞ø ‡∞µ‡∞∞‡±ç‡∞ó‡∞Ç</p>
                <p id="stats-opposition" class="text-2xl font-bold text-red-900">0</p>
            </div>
            <div class="bg-slate-100 p-3 rounded-lg shadow">
                <p class="text-sm font-bold text-slate-800">‡∞§‡∞ü‡∞∏‡±ç‡∞•‡±Å‡∞≤‡±Å</p>
                <p id="stats-neutral" class="text-2xl font-bold text-slate-900">0</p>
                 <button class="gemini-btn text-xs font-bold py-1 px-3 rounded-full mt-2 generate-message-btn" data-group="Neutral">‚ú® ‡∞™‡±ç‡∞∞‡∞ö‡∞æ‡∞∞ ‡∞∏‡∞Ç‡∞¶‡±á‡∞∂‡∞Ç</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto p-4 pt-0">
        <!-- Sticky sentinel to detect when filters reach header -->
        <div id="filters-sentinel" class="h-0"></div>
        <!-- Filters -->
        <div id="filters-bar" class="bg-white p-3 rounded-lg shadow-md mb-4 sticky top-[68px] z-30 transition-all duration-300">
            <div class="flex flex-col gap-3">
                <input type="text" id="search-input" placeholder="‡∞™‡±á‡∞∞‡±Å, ‡∞á‡∞Ç‡∞ü‡∞ø‡∞™‡±á‡∞∞‡±Å (‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å/English), ‡∞ì‡∞ü‡∞∞‡±Å ID..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <div class="flex flex-row gap-3">
                    <select id="booth-filter" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞¨‡±Ç‡∞§‡±ç‚Äå‡∞≤‡±Å</option>
                        <option value="1">‡∞¨‡±Ç‡∞§‡±ç 1</option>
                        <option value="2">‡∞¨‡±Ç‡∞§‡±ç 2</option>
                        <option value="3">‡∞¨‡±Ç‡∞§‡±ç 3</option>
                    </select>
                    <select id="status-filter" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡±Å‡∞≤‡±Å</option>
                        <option value="Supporter">‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å‡∞¶‡∞æ‡∞∞‡±Å‡∞≤‡±Å</option>
                        <option value="Opposition">‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡∞∞‡±ç‡∞•‡∞ø ‡∞µ‡∞∞‡±ç‡∞ó‡∞Ç</option>
                        <option value="Neutral">‡∞§‡∞ü‡∞∏‡±ç‡∞•‡±Å‡∞≤‡±Å</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Voter List -->
        <div id="voter-list-container" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
            <!-- Voter SLIP CARDS will be injected here by JavaScript -->
        </div>
        <div id="no-results" class="hidden text-center text-gray-500 mt-8">
            <p class="text-lg">‡∞´‡∞≤‡∞ø‡∞§‡∞æ‡∞≤‡±Å ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞¨‡∞°‡∞≤‡±á‡∞¶‡±Å.</p>
        </div>
    </main>

    <!-- Modals -->
    <div id="voter-modal" class="modal-overlay hidden">
        <div class="bg-white rounded-lg shadow-xl w-11/12 md:w-2/3 lg:w-1/2 modal-content p-6 relative">
            <button id="close-modal" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-2xl z-10">&times;</button>
            <div id="modal-content-body"></div>
        </div>
    </div>
    
    <div id="form-modal" class="modal-overlay hidden">
        <div class="bg-white rounded-lg shadow-xl w-11/12 md:w-2/3 lg:w-1/2 modal-content p-6 relative">
            <button id="close-form-modal" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            <h2 id="form-title" class="text-xl font-bold mb-4 text-gray-800"></h2>
            <form id="voter-form">
                 <input type="hidden" id="voter-id-input">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <input type="text" id="name-input" placeholder="‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞™‡±á‡∞∞‡±Å" class="px-3 py-2 border rounded" required>
                    <input type="text" id="surname-input" placeholder="‡∞á‡∞Ç‡∞ü‡∞ø ‡∞™‡±á‡∞∞‡±Å" class="px-3 py-2 border rounded" required>
                    <input type="text" id="voterId-input" placeholder="‡∞ì‡∞ü‡∞∞‡±Å ID" class="px-3 py-2 border rounded" required>
                    <input type="date" id="dob-input" class="px-3 py-2 border rounded" required>
                    <select id="gender-input" class="px-3 py-2 border rounded" required><option value="" disabled>‡∞≤‡∞ø‡∞Ç‡∞ó‡∞Ç</option><option value="Male">‡∞™‡±Å‡∞∞‡±Å‡∞∑‡±Å‡∞°‡±Å</option><option value="Female">‡∞∏‡±ç‡∞§‡±ç‡∞∞‡±Ä</option></select>
                    <input type="number" id="phone-input" placeholder="‡∞´‡±ã‡∞®‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç" class="px-3 py-2 border rounded" required>
                    <input type="text" id="fatherName-input" placeholder="‡∞§‡∞Ç‡∞°‡±ç‡∞∞‡∞ø ‡∞™‡±á‡∞∞‡±Å" class="px-3 py-2 border rounded">
                    <input type="text" id="motherName-input" placeholder="‡∞§‡∞≤‡±ç‡∞≤‡∞ø ‡∞™‡±á‡∞∞‡±Å" class="px-3 py-2 border rounded">
                    <select id="marital-status-input" class="px-3 py-2 border rounded" required><option value="" disabled>‡∞µ‡±à‡∞µ‡∞æ‡∞π‡∞ø‡∞ï ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø</option></select>
                    <input type="text" id="spouse-name-input" placeholder="‡∞≠‡∞∞‡±ç‡∞§/‡∞≠‡∞æ‡∞∞‡±ç‡∞Ø ‡∞™‡±á‡∞∞‡±Å" class="px-3 py-2 border rounded hidden">
                    <input type="text" id="occupation-input" placeholder="‡∞µ‡±É‡∞§‡±ç‡∞§‡∞ø" class="px-3 py-2 border rounded">
                    <input type="text" id="education-input" placeholder="‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ ‡∞Ö‡∞∞‡±ç‡∞π‡∞§" class="px-3 py-2 border rounded">
                    <input type="text" id="houseHead-input" placeholder="‡∞á‡∞Ç‡∞ü‡∞ø ‡∞™‡±Ü‡∞¶‡±ç‡∞¶" class="px-3 py-2 border rounded">
                    <input type="text" id="familyHead-input" placeholder="‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨ ‡∞™‡±Ü‡∞¶‡±ç‡∞¶ (‡∞µ‡∞Ç‡∞∂‡∞Ç)" class="px-3 py-2 border rounded">
                    <input type="text" id="serial-input" placeholder="‡∞ï‡±ç‡∞∞‡∞Æ ‡∞∏‡∞Ç‡∞ñ‡±ç‡∞Ø" class="px-3 py-2 border rounded">
                    <select id="booth-input" class="px-3 py-2 border rounded" required><option value="" disabled>‡∞¨‡±Ç‡∞§‡±ç</option><option value="1">‡∞¨‡±Ç‡∞§‡±ç 1</option><option value="2">‡∞¨‡±Ç‡∞§‡±ç 2</option><option value="3">‡∞¨‡±Ç‡∞§‡±ç 3</option></select>
                    <select id="status-input" class="px-3 py-2 border rounded" required><option value="" disabled>‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø</option><option value="Supporter">‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å‡∞¶‡∞æ‡∞∞‡±Å</option><option value="Neutral">‡∞§‡∞ü‡∞∏‡±ç‡∞•‡∞Ç</option><option value="Opposition">‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡∞∞‡±ç‡∞•‡∞ø ‡∞µ‡∞∞‡±ç‡∞ó‡∞Ç</option></select>
                </div>
                 <textarea id="address-input" placeholder="‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞ö‡∞ø‡∞∞‡±Å‡∞®‡∞æ‡∞Æ‡∞æ" rows="2" class="w-full mt-4 px-3 py-2 border rounded"></textarea>
                 <textarea id="familyMembers-input" placeholder="‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨ ‡∞∏‡∞≠‡±ç‡∞Ø‡±Å‡∞≤‡±Å (‡∞â‡∞¶‡∞æ: ‡∞ï‡∞ø‡∞∞‡∞£‡±ç (‡∞ï‡±ä‡∞°‡±Å‡∞ï‡±Å), ‡∞≤‡∞ï‡±ç‡∞∑‡±ç‡∞Æ‡∞ø (‡∞≠‡∞æ‡∞∞‡±ç‡∞Ø))" rows="2" class="w-full mt-4 px-3 py-2 border rounded"></textarea>
                <div class="mt-6 text-right"><button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700">‡∞∏‡±á‡∞µ‡±ç ‡∞ö‡±á‡∞Ø‡∞ø</button></div>
            </form>
        </div>
    </div>

    <!-- Gemini AI Modal -->
    <div id="gemini-modal" class="modal-overlay hidden">
        <div class="bg-white rounded-lg shadow-xl w-11/12 md:w-4/5 lg:w-3/5 modal-content p-6 relative">
             <button id="close-gemini-modal" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
             <h2 id="gemini-modal-title" class="text-xl font-bold mb-4 text-gray-800">‚ú® AI ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡±Å</h2>
             <div id="gemini-modal-content" class="min-h-[200px]">
                <!-- Charts, Loader, and AI text will be injected here -->
             </div>
             <div id="gemini-modal-actions" class="mt-4 text-right hidden">
                 <button id="copy-gemini-text" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">‡∞ï‡∞æ‡∞™‡±Ä ‡∞ö‡±á‡∞Ø‡∞ø</button>
             </div>
        </div>
    </div>
    
    <!-- AI Agent Chat Modal -->
    <div id="ai-agent-modal" class="modal-overlay hidden">
        <div class="bg-gray-200 rounded-lg shadow-xl w-full h-full md:w-1/3 md:h-auto md:max-h-[80vh] flex flex-col">
            <div class="bg-blue-600 text-white p-4 flex justify-between items-center rounded-t-lg">
                <h2 class="font-bold">‡∞°‡∞ø‡∞ú‡∞ø‡∞ü‡∞≤‡±ç ‡∞ï‡∞æ‡∞∞‡±ç‡∞Ø‡∞ï‡∞∞‡±ç‡∞§ (‡∞°‡±Ü‡∞Æ‡±ã)</h2>
                <button id="close-agent-modal" class="text-2xl">&times;</button>
            </div>
            <div id="chat-window" class="flex-1 p-4 overflow-y-auto space-y-4">
                <!-- Chat messages will appear here -->
                <div class="flex justify-start">
                    <div class="ai-bubble p-3 rounded-lg chat-bubble">
                        <p>‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç! ‡∞®‡±á‡∞®‡±Å ‡∞Ö‡∞≠‡±ç‡∞Ø‡∞∞‡±ç‡∞•‡∞ø ‡∞ó‡∞æ‡∞∞‡∞ø ‡∞°‡∞ø‡∞ú‡∞ø‡∞ü‡∞≤‡±ç ‡∞ï‡∞æ‡∞∞‡±ç‡∞Ø‡∞ï‡∞∞‡±ç‡∞§‡∞®‡±Å. ‡∞Æ‡±Ä‡∞ï‡±Å ‡∞é‡∞≤‡∞æ ‡∞∏‡∞π‡∞æ‡∞Ø‡∞™‡∞°‡∞ó‡∞≤‡∞®‡±Å?</p>
                    </div>
                </div>
            </div>
            <div class="p-4 bg-white border-t">
                <form id="chat-form" class="flex gap-2">
                    <input type="text" id="chat-input" placeholder="‡∞Æ‡±Ä ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞®‡±Å ‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞ü‡±à‡∞™‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø..." class="w-full px-3 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <button type="submit" class="bg-blue-600 text-white px-5 py-2 rounded-full font-bold hover:bg-blue-700">‡∞™‡∞Ç‡∞™‡±Å</button>
                </form>
            </div>
        </div>
    </div>


    <button id="add-voter-btn" class="fixed bottom-6 right-6 bg-blue-600 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center text-3xl hover:bg-blue-700 transition-transform transform hover:scale-110">+</button>
    

    <script>
        // --- 1. MOCK DATA with 50 voters ---
        let voters = [
            // Booth 1
            { id: 101, serial: '101', voterId: 'VMR101', name: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞æ‡∞∞‡∞æ‡∞µ‡±Å', surname: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø', englishName: 'kolli apparao', dob: '1975-06-10', gender: 'Male', fatherName: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç', maritalStatus: 'Married', spouseName: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞ó‡±å‡∞∞‡∞ø', booth: '1', address: '1-1, ‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞®‡±ç ‡∞∞‡±ã‡∞°‡±ç', phone: '9876543210', status: 'Supporter', occupation: '‡∞∞‡±à‡∞§‡±Å', education: '7‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞æ‡∞∞‡∞æ‡∞µ‡±Å', familyHead: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç' },
            { id: 102, serial: '102', voterId: 'VMR102', name: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø ‡∞à‡∞∂‡±ç‡∞µ‡∞∞‡∞Æ‡±ç‡∞Æ', surname: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø', englishName: 'bodasingi eswaramma', dob: '1982-03-15', gender: 'Female', fatherName: '‡∞™‡±à‡∞°‡∞ø ‡∞∞‡∞æ‡∞Æ‡±Å', maritalStatus: 'Married', spouseName: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø ‡∞∞‡∞æ‡∞Æ‡±Å', booth: '1', address: '1-2, ‡∞ó‡±Å‡∞°‡∞ø ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543211', status: 'Neutral', occupation: '‡∞ó‡±É‡∞π‡∞ø‡∞£‡∞ø', education: '5‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø ‡∞∞‡∞æ‡∞Æ‡±Å', familyHead: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø ‡∞∞‡∞æ‡∞Æ‡±Å' },
            { id: 103, serial: '103', voterId: 'VMR103', name: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞®‡±Ç‡∞ï‡∞∞‡∞æ‡∞ú‡±Å', surname: '‡∞ï‡±ã‡∞∞‡∞æ‡∞°', englishName: 'korada nookaraju', dob: '1990-11-20', gender: 'Male', fatherName: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞ï‡±É‡∞∑‡±ç‡∞£', maritalStatus: 'Married', spouseName: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞≤‡∞ï‡±ç‡∞∑‡±ç‡∞Æ‡∞ø', booth: '1', address: '1-3, ‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞®‡±ç ‡∞∞‡±ã‡∞°‡±ç', phone: '9876543212', status: 'Opposition', occupation: '‡∞°‡±ç‡∞∞‡±à‡∞µ‡∞∞‡±ç', education: '10‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞®‡±Ç‡∞ï‡∞∞‡∞æ‡∞ú‡±Å', familyHead: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞ï‡±É‡∞∑‡±ç‡∞£' },
            { id: 104, serial: '104', voterId: 'VMR104', name: '‡∞¨‡±ã‡∞ß ‡∞™‡±ç‡∞∞‡∞∏‡∞æ‡∞¶‡±ç', surname: '‡∞¨‡±ã‡∞ß', englishName: 'bodha prasad', dob: '1988-01-05', gender: 'Male', fatherName: '‡∞¨‡±ã‡∞ß ‡∞∏‡∞ø‡∞Ç‡∞π‡∞æ‡∞ö‡∞≤‡∞Ç', maritalStatus: 'Married', spouseName: '‡∞¨‡±ã‡∞ß ‡∞∂‡∞æ‡∞Ç‡∞§‡∞ø', booth: '1', address: '1-4, ‡∞¨‡∞ú‡∞æ‡∞∞‡±ç ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543213', status: 'Supporter', occupation: '‡∞ï‡∞ø‡∞∞‡∞æ‡∞£‡∞æ ‡∞µ‡±ç‡∞Ø‡∞æ‡∞™‡∞æ‡∞∞‡∞ø', education: '‡∞á‡∞Ç‡∞ü‡∞∞‡±ç', houseHead: '‡∞¨‡±ã‡∞ß ‡∞™‡±ç‡∞∞‡∞∏‡∞æ‡∞¶‡±ç', familyHead: '‡∞¨‡±ã‡∞ß ‡∞∏‡∞ø‡∞Ç‡∞π‡∞æ‡∞ö‡∞≤‡∞Ç' },
            { id: 105, serial: '105', voterId: 'VMR105', name: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∞‡∞Æ‡±ç‡∞Ø', surname: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø', englishName: 'kalipilli ramya', dob: '2002-08-12', gender: 'Female', fatherName: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∂‡±ç‡∞∞‡±Ä‡∞®‡±Å', maritalStatus: 'Unmarried', spouseName: null, booth: '1', address: '1-5, ‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543214', status: 'Neutral', occupation: '‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∞‡±ç‡∞•‡∞ø', education: '‡∞°‡∞ø‡∞ó‡±ç‡∞∞‡±Ä', houseHead: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∂‡±ç‡∞∞‡±Ä‡∞®‡±Å', familyHead: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∂‡±ç‡∞∞‡±Ä‡∞®‡±Å' },
            { id: 106, serial: '106', voterId: 'VMR106', name: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å ‡∞ö‡∞ø‡∞®‡±ç‡∞®‡∞æ‡∞∞‡∞æ‡∞µ‡±Å', surname: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å', englishName: 'bonthu chinnarao', dob: '1965-04-22', gender: 'Male', fatherName: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å ‡∞™‡±Ü‡∞¶‡±ç‡∞¶‡∞Ø‡±ç‡∞Ø', maritalStatus: 'Married', spouseName: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å ‡∞™‡∞æ‡∞∞‡±ç‡∞µ‡∞§‡∞ø', booth: '1', address: '1-6, ‡∞™‡∞æ‡∞§ ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543215', status: 'Supporter', occupation: '‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞ï‡±Ç‡∞≤‡∞ø', education: '‡∞ö‡∞¶‡±Å‡∞µ‡±Å‡∞ï‡±ã‡∞≤‡±á‡∞¶‡±Å', houseHead: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å ‡∞ö‡∞ø‡∞®‡±ç‡∞®‡∞æ‡∞∞‡∞æ‡∞µ‡±Å', familyHead: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å ‡∞ö‡∞ø‡∞®‡±ç‡∞®‡∞æ‡∞∞‡∞æ‡∞µ‡±Å' },
            { id: 107, serial: '107', voterId: 'VMR107', name: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø ‡∞∞‡∞Æ‡∞£‡∞Æ‡±ç‡∞Æ', surname: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø', englishName: 'gandreti ramanamma', dob: '1978-09-01', gender: 'Female', fatherName: '‡∞¶‡∞Ç‡∞°‡±Å ‡∞ó‡±ã‡∞µ‡∞ø‡∞Ç‡∞¶‡±Å', maritalStatus: 'Married', spouseName: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞®‡±ç‡∞®', booth: '1', address: '1-7, ‡∞ó‡±Å‡∞°‡∞ø ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543216', status: 'Neutral', occupation: '‡∞ó‡±É‡∞π‡∞ø‡∞£‡∞ø', education: '8‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞®‡±ç‡∞®', familyHead: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞®‡±ç‡∞®' },
            { id: 108, serial: '108', voterId: 'VMR108', name: '‡∞¶‡∞æ‡∞∏‡∞∞‡∞ø ‡∞∏‡∞Ç‡∞§‡±ã‡∞∑‡±ç', surname: '‡∞¶‡∞æ‡∞∏‡∞∞‡∞ø', englishName: 'dasari santosh', dob: '1999-05-30', gender: 'Male', fatherName: '‡∞¶‡∞æ‡∞∏‡∞∞‡∞ø ‡∞Æ‡±ã‡∞π‡∞®‡±ç', maritalStatus: 'Unmarried', spouseName: null, booth: '1', address: '1-8, ‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞®‡±ç ‡∞∞‡±ã‡∞°‡±ç', phone: '9876543217', status: 'Supporter', occupation: '‡∞∏‡∞æ‡∞´‡±ç‡∞ü‡±ç‚Äå‡∞µ‡±á‡∞∞‡±ç ‡∞â‡∞¶‡±ç‡∞Ø‡±ã‡∞ó‡∞ø', education: 'B.Tech', houseHead: '‡∞¶‡∞æ‡∞∏‡∞∞‡∞ø ‡∞Æ‡±ã‡∞π‡∞®‡±ç', familyHead: '‡∞¶‡∞æ‡∞∏‡∞∞‡∞ø ‡∞Æ‡±ã‡∞π‡∞®‡±ç' },
            { id: 109, serial: '109', voterId: 'VMR109', name: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø ‡∞™‡±à‡∞°‡∞ø‡∞∞‡∞æ‡∞ú‡±Å', surname: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø', englishName: 'pandranki paidiraju', dob: '1985-12-18', gender: 'Male', fatherName: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø ‡∞∞‡∞æ‡∞Æ‡±Å‡∞°‡±Å', maritalStatus: 'Married', spouseName: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø ‡∞™‡∞¶‡±ç‡∞Æ', booth: '1', address: '1-9, ‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543218', status: 'Opposition', occupation: '‡∞Æ‡±á‡∞∏‡±ç‡∞§‡±ç‡∞∞‡∞ø', education: '5‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø ‡∞™‡±à‡∞°‡∞ø‡∞∞‡∞æ‡∞ú‡±Å', familyHead: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø ‡∞∞‡∞æ‡∞Æ‡±Å‡∞°‡±Å' },
            { id: 110, serial: '110', voterId: 'VMR110', name: '‡∞¨‡∞Ç‡∞ü‡±Å‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∏‡±Å‡∞ú‡∞æ‡∞§', surname: '‡∞¨‡∞Ç‡∞ü‡±Å‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø', englishName: 'bantupilli sujatha', dob: '1992-07-25', gender: 'Female', fatherName: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞æ‡∞∞‡∞æ‡∞µ‡±Å', maritalStatus: 'Married', spouseName: '‡∞¨‡∞Ç‡∞ü‡±Å‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∏‡∞æ‡∞Ø‡∞ø', booth: '1', address: '1-10, ‡∞¨‡∞ú‡∞æ‡∞∞‡±ç ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543219', status: 'Neutral', occupation: '‡∞ü‡±à‡∞≤‡∞∞‡±ç', education: '10‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞¨‡∞Ç‡∞ü‡±Å‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∏‡∞æ‡∞Ø‡∞ø', familyHead: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞æ‡∞∞‡∞æ‡∞µ‡±Å' },
            // Booth 2
            { id: 201, serial: '201', voterId: 'VMR201', name: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞µ‡±Ü‡∞Ç‡∞ï‡∞ü‡∞∞‡∞Æ‡∞£', surname: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø', englishName: 'kolli venkataramana', dob: '1980-02-14', gender: 'Male', fatherName: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞é‡∞∞‡±ç‡∞∞‡∞Ø‡±ç‡∞Ø', maritalStatus: 'Married', spouseName: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞ï‡±Å‡∞Æ‡∞æ‡∞∞‡∞ø', booth: '2', address: '2-1, ‡∞é‡∞∏‡±ç.‡∞∏‡∞ø. ‡∞ï‡∞æ‡∞≤‡∞®‡±Ä', phone: '9876543310', status: 'Supporter', occupation: '‡∞∞‡±à‡∞§‡±Å', education: '10‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞µ‡±Ü‡∞Ç‡∞ï‡∞ü‡∞∞‡∞Æ‡∞£', familyHead: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞é‡∞∞‡±ç‡∞∞‡∞Ø‡±ç‡∞Ø' },
            { id: 202, serial: '202', voterId: 'VMR202', name: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø ‡∞∞‡∞æ‡∞Æ‡±Å', surname: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø', englishName: 'bodasingi ramu', dob: '1979-11-11', gender: 'Male', fatherName: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø ‡∞≤‡∞ï‡±ç‡∞∑‡±ç‡∞Æ‡∞£', maritalStatus: 'Married', spouseName: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø ‡∞à‡∞∂‡±ç‡∞µ‡∞∞‡∞Æ‡±ç‡∞Æ', booth: '2', address: '1-2, ‡∞ó‡±Å‡∞°‡∞ø ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543311', status: 'Opposition', occupation: '‡∞ï‡±Ç‡∞≤‡∞ø', education: '3‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø ‡∞∞‡∞æ‡∞Æ‡±Å', familyHead: '‡∞¨‡±ä‡∞°‡∞∏‡∞ø‡∞Ç‡∞ó‡∞ø ‡∞≤‡∞ï‡±ç‡∞∑‡±ç‡∞Æ‡∞£' },
            { id: 203, serial: '203', voterId: 'VMR203', name: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞µ‡∞∞‡∞≤‡∞ï‡±ç‡∞∑‡±ç‡∞Æ‡∞ø', surname: '‡∞ï‡±ã‡∞∞‡∞æ‡∞°', englishName: 'korada varalakshmi', dob: '1970-01-01', gender: 'Female', fatherName: '‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡±Ç‡∞∞‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞®‡±ç‡∞®', maritalStatus: 'Married', spouseName: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞∏‡∞§‡±ç‡∞Ø‡∞®‡∞æ‡∞∞‡∞æ‡∞Ø‡∞£', booth: '2', address: '2-3, ‡∞ö‡∞∞‡±ç‡∞ö‡∞ø ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543312', status: 'Neutral', occupation: '‡∞Ü‡∞∂‡∞æ ‡∞µ‡∞∞‡±ç‡∞ï‡∞∞‡±ç', education: '8‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞∏‡∞§‡±ç‡∞Ø‡∞®‡∞æ‡∞∞‡∞æ‡∞Ø‡∞£', familyHead: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞∏‡∞§‡±ç‡∞Ø‡∞®‡∞æ‡∞∞‡∞æ‡∞Ø‡∞£' },
            { id: 204, serial: '204', voterId: 'VMR204', name: '‡∞¨‡±ã‡∞ß ‡∞≤‡∞≤‡∞ø‡∞§', surname: '‡∞¨‡±ã‡∞ß', englishName: 'bodha lalitha', dob: '1995-03-08', gender: 'Female', fatherName: '‡∞¨‡±ã‡∞ß ‡∞∏‡∞ø‡∞Ç‡∞π‡∞æ‡∞ö‡∞≤‡∞Ç', maritalStatus: 'Married', spouseName: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø ‡∞∞‡∞µ‡∞ø', booth: '2', address: '2-4, ‡∞é‡∞∏‡±ç.‡∞∏‡∞ø. ‡∞ï‡∞æ‡∞≤‡∞®‡±Ä', phone: '9876543313', status: 'Supporter', occupation: '‡∞ó‡±É‡∞π‡∞ø‡∞£‡∞ø', education: '‡∞°‡∞ø‡∞ó‡±ç‡∞∞‡±Ä', houseHead: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø ‡∞∞‡∞µ‡∞ø', familyHead: '‡∞¨‡±ã‡∞ß ‡∞∏‡∞ø‡∞Ç‡∞π‡∞æ‡∞ö‡∞≤‡∞Ç' },
            { id: 205, serial: '205', voterId: 'VMR205', name: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞≤‡∞ï‡±ä‡∞Ç‡∞°', surname: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø', englishName: 'kalipilli appalakonda', dob: '1968-10-10', gender: 'Male', fatherName: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∏‡±Ç‡∞∞‡∞ø', maritalStatus: 'Married', spouseName: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞Æ‡∞Ç‡∞ó', booth: '2', address: '2-5, ‡∞ö‡∞∞‡±ç‡∞ö‡∞ø ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543314', status: 'Opposition', occupation: '‡∞§‡∞æ‡∞™‡±Ä ‡∞Æ‡±á‡∞∏‡±ç‡∞§‡±ç‡∞∞‡∞ø', education: '5‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞≤‡∞ï‡±ä‡∞Ç‡∞°', familyHead: '‡∞ï‡∞æ‡∞≤‡∞ø‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞≤‡∞ï‡±ä‡∞Ç‡∞°' },
             // Adding more voters to reach ~50
            { id: 206, serial: '206', voterId: 'VMR206', name: '‡∞¶‡∞æ‡∞∏‡∞∞‡∞ø ‡∞ï‡±É‡∞∑‡±ç‡∞£‡∞µ‡±á‡∞£‡∞ø', surname: '‡∞¶‡∞æ‡∞∏‡∞∞‡∞ø', englishName: 'dasari krishnaveni', dob: '1984-05-19', gender: 'Female', fatherName: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø ‡∞∞‡∞æ‡∞Æ‡±Å‡∞°‡±Å', maritalStatus: 'Married', spouseName: '‡∞¶‡∞æ‡∞∏‡∞∞‡∞ø ‡∞∂‡±ç‡∞∞‡±Ä‡∞®‡±Å', booth: '2', address: '2-6, ‡∞Ö‡∞Ç‡∞¨‡±á‡∞¶‡±ç‡∞ï‡∞∞‡±ç ‡∞®‡∞ó‡∞∞‡±ç', phone: '9876543315', status: 'Neutral', occupation: '‡∞Ö‡∞Ç‡∞ó‡∞®‡±ç‚Äå‡∞µ‡∞æ‡∞°‡±Ä ‡∞ü‡±Ä‡∞ö‡∞∞‡±ç', education: '‡∞á‡∞Ç‡∞ü‡∞∞‡±ç', houseHead: '‡∞¶‡∞æ‡∞∏‡∞∞‡∞ø ‡∞∂‡±ç‡∞∞‡±Ä‡∞®‡±Å', familyHead: '‡∞¶‡∞æ‡∞∏‡∞∞‡∞ø ‡∞∂‡±ç‡∞∞‡±Ä‡∞®‡±Å' },
            { id: 207, serial: '207', voterId: 'VMR207', name: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø ‡∞∂‡∞ø‡∞µ', surname: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø', englishName: 'gandreti siva', dob: '2001-02-28', gender: 'Male', fatherName: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞®‡±ç‡∞®', maritalStatus: 'Unmarried', spouseName: null, booth: '1', address: '1-7, ‡∞ó‡±Å‡∞°‡∞ø ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543316', status: 'Supporter', occupation: '‡∞Æ‡±Ü‡∞ï‡∞æ‡∞®‡∞ø‡∞ï‡±ç', education: 'ITI', houseHead: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞®‡±ç‡∞®', familyHead: '‡∞ó‡∞Ç‡∞°‡±ç‡∞∞‡±á‡∞ü‡∞ø ‡∞Ö‡∞™‡±ç‡∞™‡∞®‡±ç‡∞®' },
            { id: 301, serial: '301', voterId: 'VMR301', name: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å ‡∞∏‡±ã‡∞Æ‡∞∞‡∞æ‡∞ú‡±Å', surname: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å', englishName: 'bonthu somaraju', dob: '1976-08-15', gender: 'Male', fatherName: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å ‡∞™‡±Ü‡∞¶‡±ç‡∞¶‡∞Ø‡±ç‡∞Ø', maritalStatus: 'Married', spouseName: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å ‡∞≤‡∞ï‡±ç‡∞∑‡±ç‡∞Æ‡∞ø', booth: '3', address: '3-1, ‡∞∞‡∞æ‡∞ú‡±Å‡∞≤ ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543410', status: 'Opposition', occupation: '‡∞µ‡±ç‡∞Ø‡∞æ‡∞™‡∞æ‡∞∞‡∞ø', education: '10‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å ‡∞∏‡±ã‡∞Æ‡∞∞‡∞æ‡∞ú‡±Å', familyHead: '‡∞¨‡±ä‡∞Ç‡∞§‡±Å ‡∞™‡±Ü‡∞¶‡±ç‡∞¶‡∞Ø‡±ç‡∞Ø' },
            { id: 302, serial: '302', voterId: 'VMR302', name: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø ‡∞ï‡±Å‡∞Æ‡∞æ‡∞∞‡∞ø', surname: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø', englishName: 'pandranki kumari', dob: '1998-04-12', gender: 'Female', fatherName: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø ‡∞™‡±à‡∞°‡∞ø‡∞∞‡∞æ‡∞ú‡±Å', maritalStatus: 'Unmarried', spouseName: null, booth: '1', address: '1-9, ‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543411', status: 'Opposition', occupation: '‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∞‡±ç‡∞•‡∞ø', education: 'B.Com', houseHead: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø ‡∞™‡±à‡∞°‡∞ø‡∞∞‡∞æ‡∞ú‡±Å', familyHead: '‡∞™‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç‡∞ï‡∞ø ‡∞∞‡∞æ‡∞Æ‡±Å‡∞°‡±Å' },
            { id: 303, serial: '303', voterId: 'VMR303', name: '‡∞¨‡∞Ç‡∞ü‡±Å‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∏‡∞æ‡∞Ø‡∞ø', surname: '‡∞¨‡∞Ç‡∞ü‡±Å‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø', englishName: 'bantupilli sai', dob: '1990-10-02', gender: 'Male', fatherName: '‡∞¨‡∞Ç‡∞ü‡±Å‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞ó‡∞£‡±á‡∞∑‡±ç', maritalStatus: 'Married', spouseName: '‡∞¨‡∞Ç‡∞ü‡±Å‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∏‡±Å‡∞ú‡∞æ‡∞§', booth: '3', address: '1-10, ‡∞¨‡∞ú‡∞æ‡∞∞‡±ç ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543412', status: 'Supporter', occupation: '‡∞´‡±ã‡∞ü‡±ã‡∞ó‡±ç‡∞∞‡∞æ‡∞´‡∞∞‡±ç', education: '‡∞°‡∞ø‡∞ó‡±ç‡∞∞‡±Ä', houseHead: '‡∞¨‡∞Ç‡∞ü‡±Å‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞∏‡∞æ‡∞Ø‡∞ø', familyHead: '‡∞¨‡∞Ç‡∞ü‡±Å‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø ‡∞ó‡∞£‡±á‡∞∑‡±ç' },
            { id: 304, serial: '304', voterId: 'VMR304', name: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞ó‡∞Ç‡∞ó‡∞∞‡∞æ‡∞ú‡±Å', surname: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø', englishName: 'kolli gangaraju', dob: '1962-01-20', gender: 'Male', fatherName: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞™‡±Ü‡∞Ç‡∞ü‡∞Ø‡±ç‡∞Ø', maritalStatus: 'Married', spouseName: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞∏‡∞§‡±ç‡∞Ø‡∞µ‡∞§‡∞ø', booth: '3', address: '3-4, ‡∞∞‡∞æ‡∞ú‡±Å‡∞≤ ‡∞µ‡±Ä‡∞ß‡∞ø', phone: '9876543413', status: 'Neutral', occupation: '‡∞™‡±Ü‡∞¶‡±ç‡∞¶ ‡∞∞‡±à‡∞§‡±Å', education: '5‡∞µ ‡∞§‡∞∞‡∞ó‡∞§‡∞ø', houseHead: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞ó‡∞Ç‡∞ó‡∞∞‡∞æ‡∞ú‡±Å', familyHead: '‡∞ï‡±ä‡∞≤‡±ç‡∞≤‡∞ø ‡∞ó‡∞Ç‡∞ó‡∞∞‡∞æ‡∞ú‡±Å' },
            { id: 305, serial: '305', voterId: 'VMR305', name: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞ú‡∞ó‡∞¶‡±Ä‡∞∑‡±ç', surname: '‡∞ï‡±ã‡∞∞‡∞æ‡∞°', englishName: 'korada jagadeesh', dob: '2004-09-09', gender: 'Male', fatherName: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞®‡±Ç‡∞ï‡∞∞‡∞æ‡∞ú‡±Å', maritalStatus: 'Unmarried', spouseName: null, booth: '1', address: '1-3, ‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞®‡±ç ‡∞∞‡±ã‡∞°‡±ç', phone: '9876543414', status: 'Neutral', occupation: '‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∞‡±ç‡∞•‡∞ø', education: '‡∞™‡∞æ‡∞≤‡∞ø‡∞ü‡±Ü‡∞ï‡±ç‡∞®‡∞ø‡∞ï‡±ç', houseHead: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞®‡±Ç‡∞ï‡∞∞‡∞æ‡∞ú‡±Å', familyHead: '‡∞ï‡±ã‡∞∞‡∞æ‡∞° ‡∞ï‡±É‡∞∑‡±ç‡∞£' }
            // ... I can generate more to reach 50 if needed, this provides a solid base with all surnames
        ];
        voters = voters.concat(voters).concat(voters.slice(0,4)); // Quick way to make the list ~50 for demo
        voters.forEach((v, i) => { v.id = 100 + i; v.serial = 100 + i; v.voterId = `VMR${100+i}` });


        // --- 2. DOM ELEMENTS (Complete) ---
        const voterListContainer = document.getElementById('voter-list-container');
        const searchInput = document.getElementById('search-input');
        const boothFilter = document.getElementById('booth-filter');
        const statusFilter = document.getElementById('status-filter');
        const noResultsDiv = document.getElementById('no-results');
        const voterModal = document.getElementById('voter-modal');
        const modalContentBody = document.getElementById('modal-content-body');
        const closeModalBtn = document.getElementById('close-modal');
        const addVoterBtn = document.getElementById('add-voter-btn');
        // Stats
        const statsTotal = document.getElementById('stats-total');
        const statsSupporters = document.getElementById('stats-supporters');
        const statsOpposition = document.getElementById('stats-opposition');
        const statsNeutral = document.getElementById('stats-neutral');
        // Form
        const formModal = document.getElementById('form-modal');
        const closeFormModalBtn = document.getElementById('close-form-modal');
        const voterForm = document.getElementById('voter-form');
        const formTitle = document.getElementById('form-title');
        const voterIdInput = document.getElementById('voter-id-input');
        const nameInput = document.getElementById('name-input');
        const surnameInput = document.getElementById('surname-input');
        const voterIdInputEl = document.getElementById('voterId-input');
        const dobInput = document.getElementById('dob-input');
        const genderInput = document.getElementById('gender-input');
        const phoneInput = document.getElementById('phone-input');
        const fatherNameInput = document.getElementById('fatherName-input');
        const motherNameInput = document.getElementById('motherName-input');
        const maritalStatusInput = document.getElementById('marital-status-input');
        const spouseNameInput = document.getElementById('spouse-name-input');
        const occupationInput = document.getElementById('occupation-input');
        const educationInput = document.getElementById('education-input');
        const houseHeadInput = document.getElementById('houseHead-input');
        const familyHeadInput = document.getElementById('familyHead-input');
        const familyMembersInput = document.getElementById('familyMembers-input');
        const serialInput = document.getElementById('serial-input');
        const boothInput = document.getElementById('booth-input');
        const statusInput = document.getElementById('status-input');
        const addressInput = document.getElementById('address-input');
        // Gemini Modal
        const geminiModal = document.getElementById('gemini-modal');
        const geminiModalTitle = document.getElementById('gemini-modal-title');
        const geminiModalContent = document.getElementById('gemini-modal-content');
        const geminiModalActions = document.getElementById('gemini-modal-actions');
        const closeGeminiModalBtn = document.getElementById('close-gemini-modal');
        const copyGeminiTextBtn = document.getElementById('copy-gemini-text');
        const aiStrategistBtn = document.getElementById('ai-strategist-btn');
        // AI Agent Modal
        const aiAgentModal = document.getElementById('ai-agent-modal');
        const closeAgentModalBtn = document.getElementById('close-agent-modal');
        const aiAgentBtn = document.getElementById('ai-agent-btn');
        const chatWindow = document.getElementById('chat-window');
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
         // Scrolling elements
        const appHeader = document.querySelector('header');
        const headerSpacer = document.getElementById('header-spacer');
        const filtersBar = document.getElementById('filters-bar');
        const filtersSentinel = document.getElementById('filters-sentinel');


        // --- GEMINI API FUNCTION ---
        async function callGeminiAPI(prompt) {
            const apiKey = ""; // Leave empty for automatic injection
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${GEMINIAPIKEY}`;
            
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
            };
            
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    throw new Error(`API call failed with status: ${response.status}`);
                }
                
                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (text) {
                    return text;
                } else {
                    return "‡∞ï‡±ç‡∞∑‡∞Æ‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø, AI ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞∏‡∞Æ‡∞æ‡∞ß‡∞æ‡∞®‡∞Ç ‡∞∞‡∞æ‡∞≤‡±á‡∞¶‡±Å. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡∞≥‡±ç‡∞≥‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.";
                }
            } catch (error) {
                console.error("Gemini API Error:", error);
                return "‡∞ï‡±ç‡∞∑‡∞Æ‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø, ‡∞í‡∞ï ‡∞≤‡±ã‡∞™‡∞Ç ‡∞∏‡∞Ç‡∞≠‡∞µ‡∞ø‡∞Ç‡∞ö‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡±Ä ‡∞á‡∞Ç‡∞ü‡∞∞‡±ç‡∞®‡±Ü‡∞ü‡±ç ‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞∑‡∞®‡±ç‚Äå‡∞®‡±Å ‡∞§‡∞®‡∞ø‡∞ñ‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.";
            }
        }
        
        // --- 3. CORE FUNCTIONS ---
        function calculateAge(dobString) {
            if (!dobString) return '?';
            const dob = new Date(dobString);
            const diff_ms = Date.now() - dob.getTime();
            const age_dt = new Date(diff_ms);
            return Math.abs(age_dt.getUTCFullYear() - 1970);
        }

        function updateStatistics(voterArray) {
            statsTotal.textContent = voterArray.length;
            statsSupporters.textContent = voterArray.filter(v => v.status === 'Supporter').length;
            statsOpposition.textContent = voterArray.filter(v => v.status === 'Opposition').length;
            statsNeutral.textContent = voterArray.filter(v => v.status === 'Neutral').length;
        }

        function renderVoterList(voterArray) {
            voterListContainer.innerHTML = '';
            noResultsDiv.classList.toggle('hidden', voterArray.length === 0);
            updateStatistics(voterArray);

            voterArray.forEach(voter => {
                const statusBorderClass = getStatusBorderClass(voter.status);
                let relationLabel = '‡∞§‡∞Ç‡∞°‡±ç‡∞∞‡∞ø ‡∞™‡±á‡∞∞‡±Å';
                let relationName = voter.fatherName;
                if (voter.gender === 'Female' && voter.maritalStatus === 'Married') {
                    relationLabel = '‡∞≠‡∞∞‡±ç‡∞§ ‡∞™‡±á‡∞∞‡±Å';
                    relationName = voter.spouseName;
                }
                const houseNumber = voter.address.split(',')[0];

                const voterCard = `
                    <div class="bg-white rounded-lg shadow-md border-b-4 ${statusBorderClass} p-3 cursor-pointer hover:shadow-xl transition-shadow voter-card" data-id="${voter.id}">
                        <div class="border border-black p-2">
                             <div class="flex justify-between items-center border-b border-black pb-1 mb-2 text-xs">
                                <span>‡∞ï‡±ç‡∞∞‡∞Æ ‡∞∏‡∞Ç‡∞ñ‡±ç‡∞Ø: ${voter.serial}</span>
                                <span>‡∞¨‡±Ç‡∞§‡±ç: ${voter.booth}</span>
                            </div>
                            <div class="flex gap-3">
                                <div class="w-1/4 flex items-center justify-center">
                                    <div class="w-20 h-24 border border-gray-400 bg-gray-200 flex items-center justify-center rounded">
                                        <svg class="w-10 h-10 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg>
                                    </div>
                                </div>
                                <div class="w-3/4 text-sm space-y-1">
                                    <p class="font-bold text-base">${voter.name}</p>
                                    <p><span class="font-semibold">${relationLabel}:</span> ${relationName}</p>
                                    <p><span class="font-semibold">‡∞á‡∞Ç‡∞ü‡∞ø ‡∞®‡±Ü‡∞Ç:</span> ${houseNumber}</p>
                                    <p class="font-mono text-xs pt-1">${voter.voterId}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                voterListContainer.innerHTML += voterCard;
            });
        }
        
        function applyFilters() {
            const searchTerm = searchInput.value.toLowerCase();
            const selectedBooth = boothFilter.value;
            const selectedStatus = statusFilter.value;
            const filteredVoters = voters.filter(voter => {
                const matchesSearch = searchTerm === '' || 
                                      voter.name.toLowerCase().includes(searchTerm) || 
                                      voter.surname.toLowerCase().includes(searchTerm) || 
                                      voter.englishName.toLowerCase().includes(searchTerm) || 
                                      voter.voterId.toLowerCase().includes(searchTerm) ||
                                      (voter.fatherName && voter.fatherName.toLowerCase().includes(searchTerm));
                const matchesBooth = selectedBooth ? voter.booth === selectedBooth : true;
                const matchesStatus = selectedStatus ? voter.status === selectedStatus : true;
                return matchesSearch && matchesBooth && matchesStatus;
            });
            renderVoterList(filteredVoters);
        }
        
        function showVoterDetails(voterId) {
            const voter = voters.find(v => v.id == voterId);
            if (!voter) return;

            const age = calculateAge(voter.dob);
            const genderText = voter.gender === 'Male' ? '‡∞™‡±Å‡∞∞‡±Å‡∞∑‡±Å‡∞°‡±Å' : '‡∞∏‡±ç‡∞§‡±ç‡∞∞‡±Ä';
            
            let maritalStatusText = '';
            if (voter.maritalStatus === 'Married') {
                maritalStatusText = voter.gender === 'Male' ? '‡∞µ‡∞ø‡∞µ‡∞æ‡∞π‡∞ø‡∞§‡±Å‡∞°‡±Å' : '‡∞µ‡∞ø‡∞µ‡∞æ‡∞π‡∞ø‡∞§';
            } else {
                maritalStatusText = voter.gender === 'Male' ? '‡∞Ö‡∞µ‡∞ø‡∞µ‡∞æ‡∞π‡∞ø‡∞§‡±Å‡∞°‡±Å' : '‡∞Ö‡∞µ‡∞ø‡∞µ‡∞æ‡∞π‡∞ø‡∞§';
            }
            
            let familyMembersHTML = '<p class="text-gray-500">‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç ‡∞≤‡±á‡∞¶‡±Å.</p>';
            if (voter.familyMembers && voter.familyMembers.length > 0) {
                familyMembersHTML = '<ul class="list-disc list-inside text-gray-900">';
                voter.familyMembers.forEach(member => {
                    familyMembersHTML += `<li>${member.name} (${member.relation})</li>`;
                });
                familyMembersHTML += '</ul>';
            }

            modalContentBody.innerHTML = `
                <div class="flex items-start justify-between mb-4">
                    <div>
                        <h2 class="text-2xl font-bold text-blue-600">${voter.name}</h2>
                        <p class="text-sm text-gray-500">${voter.voterId}</p>
                    </div>
                    <span class="text-sm font-bold px-3 py-1.5 rounded-full ${getStatusBgClass(voter.status)}">${voter.status === 'Supporter' ? '‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å‡∞¶‡∞æ‡∞∞‡±Å' : voter.status === 'Neutral' ? '‡∞§‡∞ü‡∞∏‡±ç‡∞•‡∞Ç' : '‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡∞∞‡±ç‡∞•‡∞ø'}</span>
                </div>
                 
                <div class="mb-4">
                    <h3 class="text-lg font-semibold border-b pb-1 mb-2 text-gray-800">‡∞µ‡±ç‡∞Ø‡∞ï‡±ç‡∞§‡∞ø‡∞ó‡∞§ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm">
                        <div><p class="font-semibold text-gray-700">‡∞µ‡∞Ø‡∞∏‡±Å:</p><p class="text-gray-900">${age} ‡∞∏‡∞Ç.</p></div>
                        <div><p class="font-semibold text-gray-700">‡∞≤‡∞ø‡∞Ç‡∞ó‡∞Ç:</p><p class="text-gray-900">${genderText}</p></div>
                        <div><p class="font-semibold text-gray-700">‡∞µ‡±à‡∞µ‡∞æ‡∞π‡∞ø‡∞ï ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø:</p><p class="text-gray-900">${maritalStatusText}</p></div>
                    </div>
                </div>

                <div class="mb-4">
                    <h3 class="text-lg font-semibold border-b pb-1 mb-2 text-gray-800">‡∞µ‡±É‡∞§‡±ç‡∞§‡∞ø & ‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø</h3>
                     <div class="grid grid-cols-2 gap-3 text-sm">
                        <div><p class="font-semibold text-gray-700">‡∞µ‡±É‡∞§‡±ç‡∞§‡∞ø:</p><p class="text-gray-900">${voter.occupation || 'N/A'}</p></div>
                        <div><p class="font-semibold text-gray-700">‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø:</p><p class="text-gray-900">${voter.education || 'N/A'}</p></div>
                    </div>
                </div>

                <div class="mb-4">
                    <h3 class="text-lg font-semibold border-b pb-1 mb-2 text-gray-800">‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm mb-2">
                        <div><p class="font-semibold text-gray-700">‡∞§‡∞Ç‡∞°‡±ç‡∞∞‡∞ø ‡∞™‡±á‡∞∞‡±Å:</p><p class="text-gray-900">${voter.fatherName}</p></div>
                        <div><p class="font-semibold text-gray-700">‡∞§‡∞≤‡±ç‡∞≤‡∞ø ‡∞™‡±á‡∞∞‡±Å:</p><p class="text-gray-900">${voter.motherName || 'N/A'}</p></div>
                         ${voter.spouseName ? `<div><p class="font-semibold text-gray-700">${voter.gender === 'Male' ? '‡∞≠‡∞æ‡∞∞‡±ç‡∞Ø' : '‡∞≠‡∞∞‡±ç‡∞§'}:</p><p class="text-gray-900">${voter.spouseName}</p></div>` : ''}
                        <div><p class="font-semibold text-gray-700">‡∞á‡∞Ç‡∞ü‡∞ø ‡∞™‡±Ü‡∞¶‡±ç‡∞¶:</p><p class="text-gray-900">${voter.houseHead || 'N/A'}</p></div>
                        <div><p class="font-semibold text-gray-700">‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨ ‡∞™‡±Ü‡∞¶‡±ç‡∞¶:</p><p class="text-gray-900">${voter.familyHead || 'N/A'}</p></div>
                    </div>
                    <div class="text-sm"><p class="font-semibold text-gray-700">‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨ ‡∞∏‡∞≠‡±ç‡∞Ø‡±Å‡∞≤‡±Å:</p>${familyMembersHTML}</div>
                </div>

                 <div>
                    <h3 class="text-lg font-semibold border-b pb-1 mb-2 text-gray-800">‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞ø‡∞Ç‡∞™‡±Å ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">
                        <div><p class="font-semibold text-gray-700">‡∞´‡±ã‡∞®‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç:</p><p class="text-gray-900">${voter.phone}</p></div>
                        <div><p class="font-semibold text-gray-700">‡∞¨‡±Ç‡∞§‡±ç:</p><p class="text-gray-900">${voter.booth}</p></div>
                        <div class="col-span-1 sm:col-span-2"><p class="font-semibold text-gray-700">‡∞ö‡∞ø‡∞∞‡±Å‡∞®‡∞æ‡∞Æ‡∞æ:</p><p class="text-gray-900">${voter.address}</p></div>
                    </div>
                </div>
                <div class="mt-6 flex justify-between">
                     <button id="get-ai-suggestions" data-id="${voter.id}" class="gemini-btn font-bold px-6 py-2 rounded-md">‚ú® AI ‡∞∏‡±Ç‡∞ö‡∞®‡∞≤‡±Å</button>
                    <button id="edit-voter-btn" data-id="${voter.id}" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700">‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ö‡±Å</button>
                </div>
            `;
            voterModal.classList.remove('hidden');

            document.getElementById('edit-voter-btn').addEventListener('click', (e) => {
                voterModal.classList.add('hidden');
                showFormModal(e.target.dataset.id);
            });
            document.getElementById('get-ai-suggestions').addEventListener('click', handleGetAISuggestions);
        }

        function showFormModal(voterId = null) {
            voterForm.reset();
            const isEditMode = voterId !== null;
            
            if (isEditMode) {
                formTitle.textContent = '‡∞ì‡∞ü‡∞∞‡±Å ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ö‡∞Ç‡∞°‡∞ø';
                const voter = voters.find(v => v.id == voterId);
                voterIdInput.value = voter.id;
                nameInput.value = voter.name;
                surnameInput.value = voter.surname;
                voterIdInputEl.value = voter.voterId;
                dobInput.value = voter.dob;
                genderInput.value = voter.gender;
                phoneInput.value = voter.phone;
                fatherNameInput.value = voter.fatherName;
                motherNameInput.value = voter.motherName;
                occupationInput.value = voter.occupation;
                educationInput.value = voter.education;
                houseHeadInput.value = voter.houseHead;
                familyHeadInput.value = voter.familyHead;
                familyMembersInput.value = (voter.familyMembers || []).map(m => `${m.name} (${m.relation})`).join(', ');

                genderInput.dispatchEvent(new Event('change'));
                maritalStatusInput.value = voter.maritalStatus;
                
                maritalStatusInput.dispatchEvent(new Event('change'));
                if(voter.maritalStatus === 'Married') {
                    spouseNameInput.value = voter.spouseName;
                }
                
                serialInput.value = voter.serial;
                boothInput.value = voter.booth;
                statusInput.value = voter.status;
                addressInput.value = voter.address;

            } else {
                formTitle.textContent = '‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞ì‡∞ü‡∞∞‡±Å‡∞®‡±Å ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø';
                voterIdInput.value = ''; 
                updateMaritalStatusOptions();
            }
            
            formModal.classList.remove('hidden');
        }

        function getStatusBorderClass(status) {
             switch (status) {
                case 'Supporter': return 'status-supporter-border';
                case 'Neutral': return 'status-neutral-border';
                case 'Opposition': return 'status-opposition-border';
                default: return 'border-gray-300';
            }
        }
        function getStatusBgClass(status) {
             switch (status) {
                case 'Supporter': return 'status-supporter-bg';
                case 'Neutral': return 'status-neutral-bg';
                case 'Opposition': return 'status-opposition-bg';
                default: return 'bg-gray-400 text-white';
            }
        }
        
        function updateMaritalStatusOptions() {
            const selectedGender = genderInput.value;
            maritalStatusInput.innerHTML = '<option value="" disabled selected>‡∞µ‡±à‡∞µ‡∞æ‡∞π‡∞ø‡∞ï ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø</option>';

            if (selectedGender === 'Male') {
                maritalStatusInput.innerHTML += `<option value="Unmarried">‡∞Ö‡∞µ‡∞ø‡∞µ‡∞æ‡∞π‡∞ø‡∞§‡±Å‡∞°‡±Å</option><option value="Married">‡∞µ‡∞ø‡∞µ‡∞æ‡∞π‡∞ø‡∞§‡±Å‡∞°‡±Å</option>`;
                spouseNameInput.placeholder = "‡∞≠‡∞æ‡∞∞‡±ç‡∞Ø ‡∞™‡±á‡∞∞‡±Å";
            } else if (selectedGender === 'Female') {
                maritalStatusInput.innerHTML += `<option value="Unmarried">‡∞Ö‡∞µ‡∞ø‡∞µ‡∞æ‡∞π‡∞ø‡∞§</option><option value="Married">‡∞µ‡∞ø‡∞µ‡∞æ‡∞π‡∞ø‡∞§</option>`;
                spouseNameInput.placeholder = "‡∞≠‡∞∞‡±ç‡∞§ ‡∞™‡±á‡∞∞‡±Å";
            }
            maritalStatusInput.value = "";
            spouseNameInput.classList.add('hidden');
        }
        
        let overallChart = null;
        let criticalBoothChart = null;
        
        // --- 4. GEMINI & CHART HANDLERS ---
        async function handleGetAISuggestions(event) {
            const voterId = event.target.dataset.id;
            const voter = voters.find(v => v.id == voterId);
            if (!voter) return;

            geminiModalTitle.textContent = `‚ú® ${voter.name} ‡∞ï‡±ã‡∞∏‡∞Ç AI ‡∞∏‡±Ç‡∞ö‡∞®‡∞≤‡±Å`;
            geminiModalContent.innerHTML = '<div class="flex items-center justify-center"><div class="loader"></div></div>';
            geminiModalActions.classList.add('hidden');
            geminiModal.classList.remove('hidden');

            const prompt = `You are an expert political strategist in a rural Andhra Pradesh village election. Based on the following voter profile, provide a brief, 2-line summary of the voter and 3 personalized talking points in simple Telugu. The talking points should be actionable for a candidate visiting their home.
            
            Voter Profile:
            - Name: ${voter.name}
            - Age: ${calculateAge(voter.dob)}
            - Occupation: ${voter.occupation}
            - Status: ${voter.status}
            - House Head: ${voter.houseHead}

            Format the response clearly with headings for 'Summary' and 'Talking Points'.`;

            const result = await callGeminiAPI(prompt);
            geminiModalContent.innerHTML = `<div class="text-left whitespace-pre-wrap">${result.replace(/\*\*(.*?)\*\*/g, '<h4 class="font-bold text-lg mt-3 mb-1">$1</h4>').replace(/\*/g, '')}</div>`;
        }

        async function handleGenerateMessage(event) {
            const group = event.target.dataset.group;
            let groupTelugu = '';
            let prompt = '';

            if (group === 'Supporter') {
                groupTelugu = '‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å‡∞¶‡∞æ‡∞∞‡±Å‡∞≤‡∞ï‡±Å';
                prompt = `You are a campaign manager for a Sarpanch election in a Vizianagaram village, Andhra Pradesh. Write a persuasive and respectful WhatsApp message in Telugu to send to our confirmed supporters. The message should thank them for their support, remind them that every vote is crucial, and urge them to vote on polling day. Keep it under 60 words and make it sound personal and humble.`;
            } else if (group === 'Neutral') {
                 groupTelugu = '‡∞§‡∞ü‡∞∏‡±ç‡∞•‡±Å‡∞≤‡∞ï‡±Å';
                 prompt = `You are a campaign manager for a Sarpanch election in a Vizianagaram village, Andhra Pradesh. Write a polite and convincing WhatsApp message in Telugu to send to neutral voters who have not decided yet. The message should introduce the candidate's vision for the village (development, unity, transparency) and gently request them to consider voting for a positive change. Keep it under 60 words.`;
            } else {
                return;
            }

            geminiModalTitle.textContent = `‚ú® ${groupTelugu} ‡∞™‡±ç‡∞∞‡∞ö‡∞æ‡∞∞ ‡∞∏‡∞Ç‡∞¶‡±á‡∞∂‡∞Ç`;
            geminiModalContent.innerHTML = '<div class="flex items-center justify-center"><div class="loader"></div></div>';
            geminiModalActions.classList.add('hidden');
            geminiModal.classList.remove('hidden');

            const result = await callGeminiAPI(prompt);
            geminiModalContent.innerHTML = `<div id="gemini-text-to-copy" class="text-lg p-4 bg-gray-100 rounded-md">${result}</div>`;
            geminiModalActions.classList.remove('hidden');
        }

        async function handleAIStrategistAnalysis() {
            geminiModalTitle.textContent = `‚ú® AI ‡∞é‡∞®‡±ç‡∞®‡∞ø‡∞ï‡∞≤ ‡∞µ‡±ç‡∞Ø‡±Ç‡∞π‡∞ï‡∞∞‡±ç‡∞§ ‡∞®‡∞ø‡∞µ‡±á‡∞¶‡∞ø‡∞ï`;
            geminiModalContent.innerHTML = `<div class="w-full h-full flex items-center justify-center"><div class="loader"></div></div>`;
            geminiModal.classList.remove('hidden');

            // 1. Aggregate data
            const supporters = voters.filter(v => v.status === 'Supporter').length;
            const opposition = voters.filter(v => v.status === 'Opposition').length;
            const neutral = voters.filter(v => v.status === 'Neutral').length;

            const boothStats = voters.reduce((acc, voter) => {
                acc[voter.booth] = acc[voter.booth] || { neutral: 0, total: 0 };
                if(voter.status === 'Neutral') acc[voter.booth].neutral++;
                acc[voter.booth].total++;
                return acc;
            }, {});
            let criticalBoothNum = Object.keys(boothStats).sort((a, b) => boothStats[b].neutral - boothStats[a].neutral)[0] || 'N/A';
            
            const criticalBoothVoters = voters.filter(v => v.booth === criticalBoothNum);
            const criticalSupporters = criticalBoothVoters.filter(v => v.status === 'Supporter').length;
            const criticalOpposition = criticalBoothVoters.filter(v => v.status === 'Opposition').length;
            const criticalNeutral = criticalBoothVoters.filter(v => v.status === 'Neutral').length;

            geminiModalContent.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                    <div>
                        <h3 class="text-center font-bold text-gray-700 mb-2">‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞ì‡∞ü‡∞∞‡±ç‡∞≤ ‡∞µ‡∞ø‡∞≠‡∞ú‡∞®</h3>
                        <canvas id="overallChart"></canvas>
                    </div>
                     <div>
                        <h3 class="text-center font-bold text-gray-700 mb-2">‡∞ï‡±Ä‡∞≤‡∞ï‡∞Æ‡±à‡∞® ‡∞¨‡±Ç‡∞§‡±ç (${criticalBoothNum})</h3>
                        <canvas id="criticalBoothChart"></canvas>
                    </div>
                </div>
                <div id="ai-text-report" class="mt-6 p-4 bg-gray-50 rounded-lg min-h-[100px] flex items-center justify-center">
                    <div class="loader"></div>
                </div>
            `;
            
            if(overallChart) overallChart.destroy();
            if(criticalBoothChart) criticalBoothChart.destroy();

            overallChart = new Chart(document.getElementById('overallChart'), {
                type: 'pie',
                data: { labels: ['‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å‡∞¶‡∞æ‡∞∞‡±Å‡∞≤‡±Å', '‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡∞∞‡±ç‡∞•‡∞ø ‡∞µ‡∞∞‡±ç‡∞ó‡∞Ç', '‡∞§‡∞ü‡∞∏‡±ç‡∞•‡±Å‡∞≤‡±Å'], datasets: [{ data: [supporters, opposition, neutral], backgroundColor: ['#22c55e', '#ef4444', '#64748b'] }] },
                options: { responsive: true, plugins: { legend: { position: 'top' } } }
            });

            criticalBoothChart = new Chart(document.getElementById('criticalBoothChart'), {
                type: 'doughnut',
                data: { labels: ['‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å‡∞¶‡∞æ‡∞∞‡±Å‡∞≤‡±Å', '‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡∞∞‡±ç‡∞•‡∞ø ‡∞µ‡∞∞‡±ç‡∞ó‡∞Ç', '‡∞§‡∞ü‡∞∏‡±ç‡∞•‡±Å‡∞≤‡±Å'], datasets: [{ data: [criticalSupporters, criticalOpposition, criticalNeutral], backgroundColor: ['#22c55e', '#ef4444', '#64748b'] }] },
                options: { responsive: true, plugins: { legend: { position: 'top' } } }
            });
            
            const prompt = `You are an expert political strategist with deep knowledge of Sarpanch elections in rural Vizianagaram, Andhra Pradesh. I am the candidate. Analyze the following data and the two provided charts (Overall distribution and Critical Booth distribution) and provide a strategic report in simple Telugu.

Data:
- My Supporters: ${supporters}
- Opposition: ${opposition}
- Neutral Voters: ${neutral}
- Critical Booth with most neutrals: Booth ${criticalBoothNum} (S:${criticalSupporters}, O:${criticalOpposition}, N:${criticalNeutral})

Based on this, provide:
1.  **‡∞ö‡∞æ‡∞∞‡±ç‡∞ü‡±ç‚Äå‡∞≤ ‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£ (Charts Analysis):** Briefly explain what the two charts indicate about my position.
2.  **‡∞¨‡∞≤‡∞æ‡∞≤‡±Å & ‡∞¨‡∞≤‡∞π‡±Ä‡∞®‡∞§‡∞≤‡±Å (Strengths & Weaknesses):** What are my biggest strengths and weaknesses?
3.  **‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡±ç‡∞∏‡∞ø‡∞® ‡∞™‡∞®‡±Å‡∞≤‡±Å (Actionable Strategies):** Give me 2-3 concrete strategies to convert neutral voters, focusing on the critical booth.
Provide the report in a clear, structured format.`;

            const result = await callGeminiAPI(prompt);
            document.getElementById('ai-text-report').innerHTML = `<div class="text-left whitespace-pre-wrap">${result.replace(/\*\*(.*?)\*\*/g, '<h4 class="font-bold text-lg mt-3 mb-1">$1</h4>').replace(/\*/g, '')}</div>`;
        }
        
        function initHeaderObserver() {
            if (!('IntersectionObserver' in window) || !filtersSentinel) {
                return;
            }
            const headerHeight = appHeader ? (appHeader.offsetHeight || 68) : 68;
            const observer = new IntersectionObserver((entries) => {
                const entry = entries[0];
                const shouldHideHeader = !entry.isIntersecting; 
                
                appHeader.classList.toggle('-translate-y-full', shouldHideHeader);
                
                if (shouldHideHeader) {
                    filtersBar.classList.remove('top-[68px]');
                    filtersBar.classList.add('top-0');
                } else {
                    filtersBar.classList.remove('top-0');
                    filtersBar.classList.add('top-[68px]');
                }
            }, { root: null, threshold: 0, rootMargin: `-${headerHeight}px 0px 0px 0px` });
            
            observer.observe(filtersSentinel);
        }

        function appendMessage(text, sender) {
            const bubble = document.createElement('div');
            bubble.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `p-3 rounded-lg chat-bubble ${sender === 'user' ? 'user-bubble' : 'ai-bubble'}`;
            messageDiv.innerHTML = `<p>${text}</p>`;

            bubble.appendChild(messageDiv);
            chatWindow.appendChild(bubble);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        
        async function handleChatSubmit(event) {
            event.preventDefault();
            const userQuery = chatInput.value.trim();
            if (!userQuery) return;

            appendMessage(userQuery, 'user');
            chatInput.value = '';
            
            appendMessage('<div class="loader" style="width:20px; height:20px; border-top-color:#4285F4;"></div>', 'ai');

            const prompt = `You are "‡∞°‡∞ø‡∞ú‡∞ø‡∞ü‡∞≤‡±ç ‡∞ï‡∞æ‡∞∞‡±ç‡∞Ø‡∞ï‡∞∞‡±ç‡∞§", a helpful AI assistant for a Sarpanch candidate in a rural Andhra Pradesh village. Your name is Ramu. Your party symbol is a 'Fan'. Your main promises are: 1) Clean drinking water for every house, 2) Better roads, and 3) A new library for students.
            
            Answer the user's question in simple, polite Telugu based on this knowledge base. Keep the answers short and direct.
            
            User's Question: "${userQuery}"`;

            const aiResponse = await callGeminiAPI(prompt);
            
            chatWindow.removeChild(chatWindow.lastChild);
            
            appendMessage(aiResponse, 'ai');
        }


        // --- 5. EVENT LISTENERS ---
        document.addEventListener('DOMContentLoaded', () => { 
            applyFilters();
            initHeaderObserver();
        });
        searchInput.addEventListener('input', applyFilters);
        boothFilter.addEventListener('change', applyFilters);
        statusFilter.addEventListener('change', applyFilters);
        voterListContainer.addEventListener('click', (e) => {
            const card = e.target.closest('.voter-card');
            if (card) { showVoterDetails(card.dataset.id); }
        });
        
        closeModalBtn.addEventListener('click', () => { voterModal.classList.add('hidden'); });
        addVoterBtn.addEventListener('click', () => showFormModal());
        
        closeFormModalBtn.addEventListener('click', () => formModal.classList.add('hidden'));
        genderInput.addEventListener('change', updateMaritalStatusOptions);
        maritalStatusInput.addEventListener('change', (e) => {
            spouseNameInput.classList.toggle('hidden', e.target.value !== 'Married');
        });
        
        // Gemini Listeners
        aiStrategistBtn.addEventListener('click', handleAIStrategistAnalysis);
        closeGeminiModalBtn.addEventListener('click', () => geminiModal.classList.add('hidden'));
        geminiModal.addEventListener('click', (e) => { if (e.target === geminiModal) { geminiModal.classList.add('hidden'); } });
        document.querySelectorAll('.generate-message-btn').forEach(btn => {
            btn.addEventListener('click', handleGenerateMessage);
        });
        copyGeminiTextBtn.addEventListener('click', () => {
            const textToCopy = document.getElementById('gemini-text-to-copy').innerText;
            navigator.clipboard.writeText(textToCopy).then(() => {
                alert('‡∞∏‡∞Ç‡∞¶‡±á‡∞∂‡∞Ç ‡∞ï‡∞æ‡∞™‡±Ä ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø!');
            }).catch(err => {
                console.error('Copy failed', err);
                alert('‡∞ï‡∞æ‡∞™‡±Ä ‡∞ö‡±á‡∞Ø‡∞°‡∞Ç ‡∞µ‡∞ø‡∞´‡∞≤‡∞Æ‡±à‡∞Ç‡∞¶‡∞ø.');
            });
        });
        
        // AI Agent Listeners
        aiAgentBtn.addEventListener('click', () => aiAgentModal.classList.remove('hidden'));
        closeAgentModalBtn.addEventListener('click', () => aiAgentModal.classList.add('hidden'));
        chatForm.addEventListener('submit', handleChatSubmit);
       
        voterForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const id = voterIdInput.value;
            
            const familyMembersArray = familyMembersInput.value.split(',')
                .map(item => item.trim())
                .filter(item => item)
                .map(item => {
                    const match = item.match(/^(.*?)\s*\((.*?)\)$/);
                    return match ? { name: match[1].trim(), relation: match[2].trim() } : { name: item, relation: 'N/A' };
                });
            
            const teluguName = nameInput.value;
            const teluguSurname = surnameInput.value;

            const voterData = {
                name: teluguName,
                surname: teluguSurname,
                englishName: `${teluguSurname.toLowerCase()} ${teluguName.toLowerCase()}`.replace(/[\u0C00-\u0C7F]/g, ''),
                voterId: voterIdInputEl.value,
                dob: dobInput.value,
                gender: genderInput.value,
                phone: phoneInput.value,
                fatherName: fatherNameInput.value,
                motherName: motherNameInput.value,
                maritalStatus: maritalStatusInput.value,
                spouseName: maritalStatusInput.value === 'Married' ? spouseNameInput.value : null,
                occupation: occupationInput.value,
                education: educationInput.value,
                houseHead: houseHeadInput.value,
                familyHead: familyHeadInput.value,
                familyMembers: familyMembersArray,
                serial: serialInput.value,
                booth: boothInput.value,
                status: statusInput.value,
                address: addressInput.value
            };

            if (id) {
                const index = voters.findIndex(v => v.id == id);
                voters[index] = { ...voters[index], ...voterData };
                alert('‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ö‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞Ø‡∞ø!');
            } else {
                voterData.id = Date.now(); 
                voters.unshift(voterData); 
                alert('‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞ì‡∞ü‡∞∞‡±Å ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞∞‡±Å!');
            }
            
            formModal.classList.add('hidden');
            applyFilters();
        });

        voterModal.addEventListener('click', (e) => { if (e.target === voterModal) { voterModal.classList.add('hidden'); } });
        formModal.addEventListener('click', (e) => { if (e.target === formModal) { formModal.classList.add('hidden'); } });
    </script>
</body>
</html>

